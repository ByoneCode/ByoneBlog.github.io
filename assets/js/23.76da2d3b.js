(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{558:function(s,a,t){"use strict";t.r(a);var n=t(9),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),t("ul",[t("li",[s._v("准备一台有公网IP的服务器作为frp的服务端")]),s._v(" "),t("li",[s._v("准备一台本地的win或者liunx都行做为客户端")]),s._v(" "),t("li",[s._v("根据自己的系统下载对应的frp（"),t("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载链接"),t("OutboundLink")],1),s._v("）")]),s._v(" "),t("li",[s._v("本文配置用于通过自定义域名访问部署于内网的 web 服务")])]),s._v(" "),t("h2",{attrs:{id:"什么是frp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是frp"}},[s._v("#")]),s._v(" 什么是frp")]),s._v(" "),t("p",[s._v("frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。\n详情文档查看（"),t("a",{attrs:{href:"https://github.com/fatedier/frp/blob/v0.33.0/README_zh.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1),s._v("）")]),s._v(" "),t("h2",{attrs:{id:"配置服务端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置服务端"}},[s._v("#")]),s._v(" 配置服务端")]),s._v(" "),t("p",[s._v("SSH连接上服务端服务器\n进入目录（根据自己喜好把文件放在哪）")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建一个frp的目录并进入该目录")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" frp\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" frp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("使用wget指令下载frp。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" 下载链接\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用tar指令解压tar.gz文件并进入解压好的目录")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" 解压的文件名\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前目录文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" 解压好的文件夹名\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("进入目录发现目录有些客户端的文件可以删掉")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f frpc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("使用vi命令编辑frps.ini文件(vi命令详情"),t("a",{attrs:{href:"https://www.runoob.com/linux/linux-vim.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("查看文档"),t("OutboundLink")],1),s._v(")")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" frps.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("配置操作（"),t("font",{attrs:{color:"red"}},[s._v("记得服务器安全组开启端口")]),s._v("）")],1),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v(" //需要和客户端绑定的端口\nvhost_http_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" //使用域名访问web时带上的端口\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("客户端的配置到这就结束了，接下来让服务端frp在后台运行起来")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#记得要先进入到frp的目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./frps -c ./frps.ini "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"配置客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置客户端"}},[s._v("#")]),s._v(" 配置客户端")]),s._v(" "),t("p",[s._v("我是用的是win系统所以要去下载win的frp（如果是liunx则和配置服务端差不多）"),t("br"),s._v("\n下载下来后把多余的服务端文件删掉frps frps.ini这两个文件"),t("br"),s._v("\n打开frpc.ini配置")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 服务端公网ip \nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务端绑定的端口")]),s._v("\nadmin_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地可视化后台管理ip（想要的话可以设置，不需要则可以省略admin配置）")]),s._v("\nadmin_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7400")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地后台访问端口")]),s._v("\nadmin_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地后台账号")]),s._v("\nadmin_pwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地后台密码")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定web配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#http类型")]),s._v("\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地ip")]),s._v("\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地服务的端口")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 域名  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#访问web的域名（必须）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("打开cmd进入到frp目录运行")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("frpc -c frpc.ini   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#frpc.ini可以创建多个配置文件，只需运行的时候访问你的:配置名.ini")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这时客户端也配置好了，只需要开启本地运行的项目通过域名加上端口号即可映射到外网访问")])])}),[],!1,null,null,null);a.default=e.exports}}]);